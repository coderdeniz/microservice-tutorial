

Tekrar

-> Mesaj ile Event arasýndaki farklar
  -> mesaj: kuyruða giden mesajda iþlenmesi için gerekli datayý taþýr, mesajo gönderen mesajýn nasýl iþleneceðini bilir.
  -> event: event'ler bir notification sistemi saðlar, event'i fýrlatan onun nasýl ele alýnacaðýný bilmez.

  -> event'te publisher broker'a gönderir ama dönüþüyle ya da ne yaptýðýyla ilgilenmez.
  -> mesaj'da subscriber'in ne yapacaðýný bilir ve datanýn dönüþünü bekler.

  -> event'ler geçmiþ ile ilgili ifade edilir, ör: UserCreatedEvent, OrderCreatedEvent gibi
  -> message'lar ise örnek: WordToPdf


  -> event'ler mesaj'lara göre daha düþük boyutludur.


-> Microservice'lerde db'de data nasýl tutulmalý? 

  -> Her mikroservis db'sinde görevi için tutulacak datalarda baþka microservisin db'sine baðýmlý olmamalý (foreign key durumu). Örnek: OrderId, CourseName, Course price gibi
  -> Bir mikroservis baþka mikroservisin db'sine doðrudan eriþememelidir. Api'ler üzerinden haberleþebilmeli.


-> Microservis'ler arasýnda distributed transaction'i nasýl yönebiliriz?

  -> transaction, db'ye yapýlan crud iþlemlerinden her biridir.
  -> patterni eventual consistency(nihai tutarlýlýk) uygulaya yönetebiliriz. Deðiþlik olduðunda db'lerde gerekli iþlemler yapýlýrken süre önemli deðilse kullanýlabilir.


 Catalog API 
 
 -> Ýçerisinde category ve course ve course'larýn özelliklerini barýndýran feature olacak. 
 -> Bir kategorinin birden fazla course olabilir (bir e çok iliþki)
 -> Course ile feature arasýnda bir e bir iliþki var.
 -> Paket: MongoDb.Driver
 -> id alanlarýna: [BsonRepresentation(BsonType.ObjectId)] attribute verilmektedir.
 -> [BsonIgnore]: MongoDb'de gözardý et bunu kaydetme
 -> AutoMapper ile dto nesneleri ile entity nesneleri arasý dönüþtürme gerçekleþtiriyoruz.
 -> Paket: AutoMapper.Extensions.Microsoft.DependencyInjection
 -> appsettings.json'da db için connectionString tanýmla
 -> class'ý appsettings'deki deðer ile doldur. (önce getsection ile çek configure et sonra addSingleton ile sýnýfý oluþtur IOptions'dan value'i çek)
 -> repository'ler yazýlýr.
 -> ControllerBase için ItemGroup Framework Reference eklenmelidir.
 -> Attribute'da (HttpGet) süslü ile parametre verilirse url'de ? yerine / olur.


 Identity API

 -> OpenSource kütüphane IdentityServer Framework kullanýlýyor.
 -> paketi indirmek için: dotnet new -i identityserver4.templates
 -> template üzerinden projeyi oluþturuyoruz dotnet new is4aspid --name FreeCourse.IdentityServer
 -> package console manager'da add-migration initial
 -> update-database
 -> template'den gelen hazýr endpointler ile token alabiliyoruz.
 -> ClientId/ClientSecret'ten gelen tokeni mvc tarafa memory'de tutabilirken user bilgisi gerekenlerde cookie benzeri yapýda tutmalýdýr.


 PhotoStock.API

 -> CancellationToken, istek atýldýktan sonra foto kaydetme iþinde yarým kalýndýysa iptal etmede iþe yarýyor.
 -> Db olmayacak, fotolar sunucudaki klasöre kaydedilecek.


 Basket.API
 
 -> Dinamik yapýya sahip olduðu için(ekleme silme çok sýk) noSql db kullanmamýz gerekir.
 -> Redis kullanacaðýz.


 Discount.API

 -> Dapper Orm ve PostgreSQL kullanýlacak.
 -> Dapperin özellikleri
    -> Hafif
    -> Hýzlý
    -> Kullanmasý basit
    -> Performanslý
    -> Any Database
    -> Simplified API, basit ara yüz
-> Ef Core'dan farký memory'de dapper çalýþmaz.





